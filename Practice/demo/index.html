<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    #container{
        display: flex;
        padding:15%;
        gap: 10%
    }
</style>
<body>
    <div id="container" >
        <div id="inner1"></div>
        <div id="inner2"></div>
    </div>
</body>
</html>
<script src="socket.io/socket.io.js"></script>

<script>
    const ws = io()
    let name;
    do{
        name = prompt("enter the user name")
    }while(!name)

    let container = document.querySelector("#container")
    let inner1 = document.querySelector("#inner1")
    let inner2 = document.querySelector("#inner2")

    // player1
    let player1 = document.createElement("h2")
    player1.innerHTML = "Player 1"

    let playerName1 = document.createElement("h2")
    playerName1.innerHTML = name

    let power1 = document.createElement("p")
    power1.setAttribute("id",("uone"))
    power1.innerHTML = 100

    let btn1 = document.createElement("button")
    btn1.innerHTML ="Attack"
    btn1.addEventListener("click",()=>{
        let random = Math.floor(Math.random()*6)
        
        ws.emit("Score change", random)
    })
    
    ws.on("Score change", (random)=>{
        let p2 = power2.innerHTML
        power2.innerHTML = p2-random
        if(p2 <=0){
            window.alert("Player 1 won")
            power2.innerHTML=100
        }
        else{
            power2.innerHTML = p2-random
        }
       
    
    })

    inner1.append(player1,playerName1,power1,btn1)

    // player2
    let player2 = document.createElement("h2")
    player2.innerHTML = "Player 2"

    let playerName2 = document.createElement("h2")
    playerName2.innerHTML = "CPU"

    let power2 = document.createElement("p")
    power2.setAttribute("id",("utwo"))
    power2.innerHTML = 100

    inner2.append(player2,playerName2,power2)



    //append
    let hr = document.createElement("hr")
    container.append(inner1,hr,inner2)


</script>